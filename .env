########################################
# APP CORE
########################################

APP_ENV=development            # development | staging | production
APP_NAME=howera-api
APP_VERSION=1.0.0
API_PREFIX=/api/v1
LOG_LEVEL=INFO                 # DEBUG | INFO | WARNING | ERROR

########################################
# SERVER
########################################

HOST=0.0.0.0
PORT=8000
WORKERS=1

########################################
# AUTH (v1 Firebase / v3 Keycloak)
########################################

# --- Firebase (v1/v2) ---
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
FIREBASE_STORAGE_BUCKET=your-bucket.appspot.com

# --- Keycloak (v3 On-Prem) ---
KEYCLOAK_ENABLED=false
KEYCLOAK_SERVER_URL=http://localhost:8080
KEYCLOAK_REALM=howera
KEYCLOAK_CLIENT_ID=howera-api
KEYCLOAK_CLIENT_SECRET=
KEYCLOAK_VERIFY_AUDIENCE=true

########################################
# DATABASE (v3 On-Prem)
########################################

DATABASE_ENABLED=false
DATABASE_URL=postgresql+psycopg://user:password@localhost:5432/howera

########################################
# STORAGE
########################################

# v1/v2 Firebase Storage used implicitly
# v3 MinIO
STORAGE_PROVIDER=firebase      # firebase | minio

MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=
MINIO_BUCKET=howera
MINIO_SECURE=false

########################################
# WORKFLOW (n8n)
########################################

WORKFLOW_ENABLED=true
N8N_WEBHOOK_URL=http://localhost:5678/webhook/job-run
N8N_INTERNAL_CALLBACK_SECRET=supersecret

########################################
# LLM PROVIDER
########################################

LLM_PROVIDER=openai            # openai | local
LLM_MODEL=gpt-4o-mini          # default v1 model
LLM_TIMEOUT_SECONDS=120

# --- OpenAI ---
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1

# --- Local LLM (v2/v3) ---
LOCAL_LLM_BASE_URL=http://localhost:11434/v1
LOCAL_LLM_API_KEY=dummy
LOCAL_LLM_MODEL=llama-3-70b-instruct

########################################
# STT PROVIDER
########################################

STT_PROVIDER=openai            # openai | local

# OpenAI STT
OPENAI_STT_MODEL=whisper-1

# Local STT (faster-whisper)
LOCAL_STT_BASE_URL=http://localhost:9001
LOCAL_STT_MODEL=large-v3

########################################
# SCREENSHOT EXTRACTION
########################################

FFMPEG_PATH=/usr/bin/ffmpeg
SCREENSHOT_FORMAT=png
SCREENSHOT_STRATEGY=precise     # precise | nearest_keyframe
SCREENSHOT_MAX_RESOLUTION=1920

########################################
# EXPORT SETTINGS
########################################

EXPORT_PROVIDER=playwright      # playwright | weasyprint
EXPORT_TIMEOUT_SECONDS=180
EXPORT_TEMP_DIR=/tmp/howera

########################################
# RETENTION POLICY
########################################

RETENTION_VIDEO_DAYS=90
RETENTION_EXPORT_DAYS=30
RETENTION_TRANSCRIPT_DAYS=365

########################################
# IDEMPOTENCY & SECURITY
########################################

IDEMPOTENCY_HEADER=X-Event-Id
SIGNED_URL_TTL_SECONDS=900
INTERNAL_API_SECRET=internal-secret

########################################
# OBSERVABILITY
########################################

ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=false

########################################
# FEATURE FLAGS
########################################

FEATURE_REGENERATE_ENABLED=true
FEATURE_SCREENSHOT_ANNOTATION_ENABLED=true
FEATURE_BLOCK_ID_ENFORCED=false   # set true in v2+
FEATURE_LOCAL_LLM_ENABLED=false
FEATURE_ON_PREM_MODE=false